---
import Layout from "../../layouts/Layout.astro";
import { UpdatePassword } from "../../components/reactJS/PasswordReset";
import { supabase } from "../../lib/supabase";

// Vérifier si l'utilisateur a un token de réinitialisation valide
// Supabase gère automatiquement la validation du token dans l'URL
const { data: { session } } = await supabase.auth.getSession();
---

<Layout
  title="Mettre à Jour le Mot de Passe - Plateforme de Documentation"
  description="Mettre à jour votre mot de passe pour la plateforme de documentation collaborative"
>
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-md mx-auto bg-white rounded-lg shadow-sm overflow-hidden">
      <div class="p-6">
        <div class="text-center mb-8">
          <h1 class="text-2xl font-bold">Mettre à Jour le Mot de Passe</h1>
          <p class="text-gray-600 mt-2">
            Créez un nouveau mot de passe sécurisé pour votre compte
          </p>
        </div>
        
        <UpdatePassword client:load />
      </div>
    </div>
  </main>
</Layout>
