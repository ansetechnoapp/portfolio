---
import Layout from "../../layouts/Layout.astro";
import { SignIn } from "../../components/reactJS/AuthUI";
import { supabase } from "../../lib/supabase";
import {
  Card,
  CardHeader,
  CardTitle,
  CardDescription,
  CardContent,
} from "../../components/ui/card";

// Vérifier si l'utilisateur est déjà connecté
const {
  data: { session },
} = await supabase.auth.getSession();
if (session) {
  return Astro.redirect("/docs/dashboard");
}
---

<Layout
  title="Connexion - Plateforme de Documentation"
  description="Connectez-vous à votre compte sur la plateforme de documentation collaborative"
>
  <main class="container mx-auto px-4 py-8">
    <div class="max-w-md mx-auto">
      <Card>
        <CardHeader className="text-center">
          <CardTitle className="text-2xl">Connexion</CardTitle>
          <CardDescription>
            Connectez-vous à votre compte sur la plateforme de documentation
            collaborative
          </CardDescription>
        </CardHeader>

        <CardContent>
          <SignIn client:load />
        </CardContent>
      </Card>
    </div>
  </main>
</Layout>
