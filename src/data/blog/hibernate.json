{
  "title": "Enable Hibernate on Ubuntu: A Step-by-Step Guide",
  "description": "Learn how to enable and configure hibernation on Ubuntu with this comprehensive guide. Follow step-by-step instructions to set up hibernation properly.",
  "pubDate": "2024-03-27T00:00:00.000Z",
  "tags": [
    "Ubuntu",
    "System Administration",
    "Power Management"
  ],
  "heroImage": "/assets/icone/matt-icons_system-hibernate.svg",
  "content": "<h1>Enable Hibernate on Ubuntu: A Step-by-Step Guide</h1>\n<h2>1. Check Secure Boot Status</h2>\n<p>Before proceeding, ensure Secure Boot is disabled. Run:  </p>\n<pre><code class=\"language-bash\">mokutil --sb-state\n</code></pre>\n<p>If the output shows <code>SecureBoot enabled</code>, disable it in your BIOS settings.</p>\n<hr>\n<h2>2. Verify Hibernation Support</h2>\n<p>Open a terminal and check if your system supports hibernation:  </p>\n<pre><code class=\"language-bash\">cat /sys/power/state\n</code></pre>\n<p>Expected output:  </p>\n<pre><code>freeze mem disk\n</code></pre>\n<p>If <code>disk</code> is present, your kernel supports hibernation. Test it with:  </p>\n<pre><code class=\"language-bash\">sudo systemctl hibernate\n</code></pre>\n<p>Your system should power off and restore upon boot.</p>\n<hr>\n<h2>3. Ensure Adequate Swap Space</h2>\n<p>Your swap should be at least the size of your RAM. Check RAM and swap size:  </p>\n<pre><code class=\"language-bash\">free -h\n</code></pre>\n<p>Verify swap partition or file:  </p>\n<pre><code class=\"language-bash\">swapon --show\n</code></pre>\n<p>If no swap exists, create one.</p>\n<hr>\n<h2>4. Check Disk Space</h2>\n<p>Install and run <code>gparted</code>:  </p>\n<pre><code class=\"language-bash\">sudo apt install gparted\nsudo gparted\n</code></pre>\n<p>Select <code>/dev/sda</code> and examine partitions for available space.</p>\n<hr>\n<h2>5. Resize Partition (If Needed)</h2>\n<p>If you need space for swap, shrink a partition like <code>/dev/sda7</code>:  </p>\n<pre><code class=\"language-bash\">df -h /\n</code></pre>\n<p>Use <code>gparted</code> to resize it. <strong>Backup your data before proceeding</strong>.</p>\n<hr>\n<h2>6. Create a Swap Partition</h2>\n<p>In <code>gparted</code>, create a new partition:  </p>\n<ul>\n<li>Set size (e.g., <strong>32 GB</strong>).  </li>\n<li>Choose <strong>linux-swap</strong> as the type.  </li>\n<li>Apply changes.  </li>\n<li>Note the new partition&#39;s device name (e.g., <code>/dev/sda8</code>).</li>\n</ul>\n<hr>\n<h2>7. Configure Swap</h2>\n<p>Format and activate the swap partition:  </p>\n<pre><code class=\"language-bash\">sudo mkswap /dev/sda8\nsudo swapon /dev/sda8\n</code></pre>\n<p>Get the <strong>UUID</strong> of the swap partition:  </p>\n<pre><code class=\"language-bash\">sudo blkid /dev/sda8\n</code></pre>\n<p>Edit <code>/etc/fstab</code>:  </p>\n<pre><code class=\"language-bash\">sudo nano /etc/fstab\n</code></pre>\n<p>Replace the <code>/swapfile</code> entry with:  </p>\n<pre><code>UUID=your_swap_uuid none swap sw 0 0\n</code></pre>\n<p>Then remove the old swap file:  </p>\n<pre><code class=\"language-bash\">sudo swapoff /swapfile\nsudo rm /swapfile\n</code></pre>\n<hr>\n<h2>8. Configure GRUB for Hibernate</h2>\n<p>Edit GRUB:  </p>\n<pre><code class=\"language-bash\">sudo nano /etc/default/grub\n</code></pre>\n<p>Modify this line:  </p>\n<pre><code>GRUB_CMDLINE_LINUX_DEFAULT=&quot;quiet splash resume=UUID=YOUR-SWAP-UUID&quot;\n</code></pre>\n<p>Update GRUB:  </p>\n<pre><code class=\"language-bash\">sudo update-grub\n</code></pre>\n<p>Also, update initramfs:  </p>\n<pre><code class=\"language-bash\">echo &quot;RESUME=UUID=YOUR-SWAP-UUID&quot; | sudo tee /etc/initramfs-tools/conf.d/resume\nsudo update-initramfs -u\n</code></pre>\n<hr>\n<h2>9. Enable Hibernate in PolicyKit</h2>\n<p>Create necessary directories:  </p>\n<pre><code class=\"language-bash\">sudo mkdir -p /etc/polkit-1/localauthority/10-vendor.d\n</code></pre>\n<p>Edit the PolicyKit configuration:  </p>\n<pre><code class=\"language-bash\">sudo nano /etc/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla\n</code></pre>\n<p>Add the following:  </p>\n<pre><code>[Re-enable hibernate by default in upower]\nIdentity=unix-user:*\nAction=org.freedesktop.upower.hibernate\nResultActive=yes\n\n[Re-enable hibernate by default in logind]\nIdentity=unix-user:*\nAction=org.freedesktop.login1.hibernate;org.freedesktop.login1.handle-hibernate-key;org.freedesktop.login1;org.freedesktop.login1.hibernate-multiple-sessions;org.freedesktop.login1.hibernate-ignore-inhibit\nResultActive=yes\n</code></pre>\n<p>Also, create another rules file:  </p>\n<pre><code class=\"language-bash\">sudo nano /etc/polkit-1/rules.d/10-enable-hibernate.rules\n</code></pre>\n<p>Add:  </p>\n<pre><code class=\"language-js\">polkit.addRule(function(action, subject) {\n    if (action.id == &quot;org.freedesktop.login1.hibernate&quot; || \n        action.id == &quot;org.freedesktop.login1.hibernate-multiple-sessions&quot; || \n        action.id == &quot;org.freedesktop.upower.hibernate&quot; || \n        action.id == &quot;org.freedesktop.login1.handle-hibernate-key&quot; || \n        action.id == &quot;org.freedesktop.login1.hibernate-ignore-inhibit&quot;) {\n        return polkit.Result.YES;\n    }\n});\n</code></pre>\n<hr>\n<h2>10. Test Hibernate</h2>\n<p>Reboot and verify hibernation:  </p>\n<pre><code class=\"language-bash\">sudo systemctl hibernate\n</code></pre>\n<p>If everything works, your system should restore after powering back on.</p>\n<hr>\n<p>This guide will be great for your blog! Let me know if you need further refinements. ðŸš€</p>\n",
  "markdown": "\r\n# Enable Hibernate on Ubuntu: A Step-by-Step Guide  \r\n\r\n## 1. Check Secure Boot Status  \r\nBefore proceeding, ensure Secure Boot is disabled. Run:  \r\n```bash\r\nmokutil --sb-state\r\n```  \r\nIf the output shows `SecureBoot enabled`, disable it in your BIOS settings.\r\n\r\n---\r\n\r\n## 2. Verify Hibernation Support  \r\nOpen a terminal and check if your system supports hibernation:  \r\n```bash\r\ncat /sys/power/state\r\n```  \r\nExpected output:  \r\n```\r\nfreeze mem disk\r\n```  \r\nIf `disk` is present, your kernel supports hibernation. Test it with:  \r\n```bash\r\nsudo systemctl hibernate\r\n```  \r\nYour system should power off and restore upon boot.\r\n\r\n---\r\n\r\n## 3. Ensure Adequate Swap Space  \r\nYour swap should be at least the size of your RAM. Check RAM and swap size:  \r\n```bash\r\nfree -h\r\n```  \r\nVerify swap partition or file:  \r\n```bash\r\nswapon --show\r\n```  \r\nIf no swap exists, create one.\r\n\r\n---\r\n\r\n## 4. Check Disk Space  \r\nInstall and run `gparted`:  \r\n```bash\r\nsudo apt install gparted\r\nsudo gparted\r\n```  \r\nSelect `/dev/sda` and examine partitions for available space.\r\n\r\n---\r\n\r\n## 5. Resize Partition (If Needed)  \r\nIf you need space for swap, shrink a partition like `/dev/sda7`:  \r\n```bash\r\ndf -h /\r\n```  \r\nUse `gparted` to resize it. **Backup your data before proceeding**.\r\n\r\n---\r\n\r\n## 6. Create a Swap Partition  \r\nIn `gparted`, create a new partition:  \r\n- Set size (e.g., **32 GB**).  \r\n- Choose **linux-swap** as the type.  \r\n- Apply changes.  \r\n- Note the new partition's device name (e.g., `/dev/sda8`).  \r\n\r\n---\r\n\r\n## 7. Configure Swap  \r\nFormat and activate the swap partition:  \r\n```bash\r\nsudo mkswap /dev/sda8\r\nsudo swapon /dev/sda8\r\n```  \r\nGet the **UUID** of the swap partition:  \r\n```bash\r\nsudo blkid /dev/sda8\r\n```  \r\nEdit `/etc/fstab`:  \r\n```bash\r\nsudo nano /etc/fstab\r\n```  \r\nReplace the `/swapfile` entry with:  \r\n```\r\nUUID=your_swap_uuid none swap sw 0 0\r\n```  \r\nThen remove the old swap file:  \r\n```bash\r\nsudo swapoff /swapfile\r\nsudo rm /swapfile\r\n```  \r\n\r\n---\r\n\r\n## 8. Configure GRUB for Hibernate  \r\nEdit GRUB:  \r\n```bash\r\nsudo nano /etc/default/grub\r\n```  \r\nModify this line:  \r\n```\r\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash resume=UUID=YOUR-SWAP-UUID\"\r\n```  \r\nUpdate GRUB:  \r\n```bash\r\nsudo update-grub\r\n```  \r\nAlso, update initramfs:  \r\n```bash\r\necho \"RESUME=UUID=YOUR-SWAP-UUID\" | sudo tee /etc/initramfs-tools/conf.d/resume\r\nsudo update-initramfs -u\r\n```  \r\n\r\n---\r\n\r\n## 9. Enable Hibernate in PolicyKit  \r\nCreate necessary directories:  \r\n```bash\r\nsudo mkdir -p /etc/polkit-1/localauthority/10-vendor.d\r\n```  \r\nEdit the PolicyKit configuration:  \r\n```bash\r\nsudo nano /etc/polkit-1/localauthority/10-vendor.d/com.ubuntu.desktop.pkla\r\n```  \r\nAdd the following:  \r\n```\r\n[Re-enable hibernate by default in upower]\r\nIdentity=unix-user:*\r\nAction=org.freedesktop.upower.hibernate\r\nResultActive=yes\r\n\r\n[Re-enable hibernate by default in logind]\r\nIdentity=unix-user:*\r\nAction=org.freedesktop.login1.hibernate;org.freedesktop.login1.handle-hibernate-key;org.freedesktop.login1;org.freedesktop.login1.hibernate-multiple-sessions;org.freedesktop.login1.hibernate-ignore-inhibit\r\nResultActive=yes\r\n```  \r\n\r\nAlso, create another rules file:  \r\n```bash\r\nsudo nano /etc/polkit-1/rules.d/10-enable-hibernate.rules\r\n```  \r\nAdd:  \r\n```js\r\npolkit.addRule(function(action, subject) {\r\n    if (action.id == \"org.freedesktop.login1.hibernate\" || \r\n        action.id == \"org.freedesktop.login1.hibernate-multiple-sessions\" || \r\n        action.id == \"org.freedesktop.upower.hibernate\" || \r\n        action.id == \"org.freedesktop.login1.handle-hibernate-key\" || \r\n        action.id == \"org.freedesktop.login1.hibernate-ignore-inhibit\") {\r\n        return polkit.Result.YES;\r\n    }\r\n});\r\n```  \r\n\r\n---\r\n\r\n## 10. Test Hibernate  \r\nReboot and verify hibernation:  \r\n```bash\r\nsudo systemctl hibernate\r\n```  \r\nIf everything works, your system should restore after powering back on.\r\n\r\n---\r\n\r\nThis guide will be great for your blog! Let me know if you need further refinements. ðŸš€\r\n",
  "slug": "hibernate"
}